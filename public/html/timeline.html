// https://www.amcharts.com/demos/serpentine-timeline/

<!-- Styles -->
<style>
    #chartdiv {
        max-width: 20%;
        height: 100%;
        background: rgba(30,30,30,0.3);
    }
</style>

<!-- Resources -->
<script src="https://www.amcharts.com/lib/4/core.js"></script>
<script src="https://www.amcharts.com/lib/4/charts.js"></script>
<script src="https://www.amcharts.com/lib/4/plugins/timeline.js"></script>
<script src="https://www.amcharts.com/lib/4/plugins/bullets.js"></script>
<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>

<!-- Chart code -->
<script>
    am4core.ready(function () {

// Themes begin
        am4core.useTheme(am4themes_animated);

        am4core.ready(function () {
            var chart = am4core.create("chartdiv", am4plugins_timeline.CurveChart);
            chart.curveContainer.padding(100, 20, 50, 20);
            chart.maskBullets = false;

            var colorSet = new am4core.ColorSet();

            chart.dateFormatter.inputDateFormat = "yyyy-MM-dd HH:mm";
            chart.dateFormatter.dateFormat = "HH";

            chart.fontSize = 10;
            chart.tooltipContainer.fontSize = 10;

            var categoryAxis = chart.yAxes.push(new am4charts.CategoryAxis());
            categoryAxis.renderer.innerRadius = 0;
            categoryAxis.renderer.radius = 0;

            var dateAxis = chart.xAxes.push(new am4charts.DateAxis());
            dateAxis.renderer.points = [
                {x: 0, y: -440},
                {x: 0, y: 400},
            ];

            dateAxis.renderer.autoScale = false;
            dateAxis.renderer.autoCenter = false;
            dateAxis.renderer.minGridDistance = 50;
            dateAxis.baseInterval = {count: 1, timeUnit: "day"};
            dateAxis.renderer.line.strokeDasharray = "1,4";
            dateAxis.renderer.line.strokeOpacity = 0.5;

            dateAxis.endLocation = 0;
            dateAxis.startLocation = -0.5;
            dateAxis.min = new Date(2018, 0, 0, 0, 0).getTime();
            dateAxis.max = new Date(2020, 2, 22, 23, 59).getTime();


            var eventSeries = chart.series.push(new am4plugins_timeline.CurveLineSeries());
            eventSeries.dataFields.dateX = "date_start";
            eventSeries.dataFields.categoryY= "";
            eventSeries.data = [{
                "event": {
                    "name": "Straßenfest Neusser Straße",
                    "date_start": 1525392000000,
                    "date_end": 1525647600000,
                    "lat": 50.96236449670464,
                    "long": 6.954247264208018
                },
                "sensorMaxDistance": 0.5,
                "sensors": [
                    35245
                ]
            },
                {
                    "event": {
                        "name": "Tag des guten Lebens",
                        "date_start": 1530421200000,
                        "date_end": 1530473400000,
                        "lat": 50.94988476658721,
                        "long": 6.956903564961454
                    },
                    "sensorMaxDistance": 0.5,
                    "sensors": [
                        5129,
                        24877,
                        28387,
                        32834
                    ]
                },
                {
                    "event": {
                        "name": "Silvesterfeuerwerk 2018",
                        "date_start": 1546218000000,
                        "date_end": 1546300800000,
                        "lat": 50.938014156165195,
                        "long": 6.957558024318678
                    },
                    "sensorMaxDistance": 0.5,
                    "sensors": [
                        3677
                    ]
                }];
            // { category: "", eventDate: "2019-03-22", letter: "G", description: "Something happened here" }];
            eventSeries.strokeOpacity = 0;

            var flagBullet = eventSeries.bullets.push(new am4plugins_bullets.PointedCircle())
            flagBullet.label.text = "name";
            flagBullet.locationX = 0;

            chart.scrollbarX = new am4core.Scrollbar();
            chart.scrollbarX.align = "center"
            chart.scrollbarX.width = am4core.percent(75);
            chart.scrollbarX.parent = chart.curveContainer;
            chart.scrollbarX.height = 600;
            chart.scrollbarX.orientation = "vertical";
            chart.scrollbarX.x = 40;
            chart.scrollbarX.y = -400;
            chart.scrollbarX.isMeasured = false;
            chart.scrollbarX.opacity = 0.5;


            dateAxis.renderer.tooltipLocation2 = 0;
            // categoryAxis.cursorTooltipEnabled = false;

            chart.zoomOutButton.disabled = true;
        });


    }); // end am4core.ready()
</script>

<!-- HTML -->
<div id="chartdiv"></div>
